# 🧠 Chapter 11. 멀티 레벨 피드백 큐 (MLFQ)

멀티 레벨 피드백 큐(MLFQ)는 **반환 시간 최적화 + 응답 시간 최적화**라는 두 마리 토끼를 잡기 위한 고급 스케줄링 기법이다.  
이 장에서는 MLFQ의 설계 원칙과 개선 과정을 살펴본다.

---

## 📌 핵심 문제
> 실행 시간 예측 없이 짧은 작업을 먼저 처리하려면 어떻게 해야 하는가?

---

## ✅ MLFQ 기본 원칙

- 여러 개의 큐 존재 (우선순위에 따라 상위~하위 정렬)
- 프로세스는 처음엔 **최상위 큐**에서 시작
- **타임 슬라이스를 모두 소진**하면 → **아래 우선순위 큐로 강등**
- **CPU를 빨리 반환**하면 → **우선순위 유지**
- 주기적으로 모든 프로세스를 최상위 큐로 복귀시켜 **기아(starvation)** 방지

---

## 🔁 기본 규칙 요약

| 규칙 | 내용 |
|------|------|
| 규칙 1 | 우선순위 높은 큐 먼저 실행 |
| 규칙 2 | 같은 큐는 RR 방식 |
| 규칙 3 | 새로운 작업은 최상위 큐부터 시작 |
| 규칙 4 | 타임슬라이스 소진 시 우선순위 강등 |
| 규칙 5 | 모든 작업을 일정 주기로 최상위 큐로 리셋 |

---

## 🧠 개선 시도

| 시도 | 설명 |
|------|------|
| 시도 1 | 우선순위 조절 (작업이 CPU 독점 시 하향) |
| 시도 2 | 우선순위 상승 (대기 시간이 길면 다시 상향) |
| 시도 3 | 정밀한 시간 측정 (CPU 점유량 기반 조절) |

---

## 💡 MLFQ의 특징

- **적응형 스케줄러**: 실행 시간 정보를 알지 못해도 동작함
- **대화형(인터랙티브)** 작업에 유리
- **다양한 시스템에서 기본 스케줄러로 사용**됨 (BSD Unix, Windows NT 등)

---

## 🧱 요약

- MLFQ는 **SJF의 반환 시간 최적화**와 **RR의 응답 시간 최적화**를 절충한 스케줄러
- CPU 사용 패턴을 관찰해 우선순위를 동적으로 조절
- 실세계에서 매우 널리 쓰이는 알고리즘

---

> 📚 출처: 『OSTEP Chapter 11 – 멀티 레벨 피드백 큐』
