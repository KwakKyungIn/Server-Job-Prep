# ğŸ”„ Chapter 9. ë¬¸ë§¥ êµí™˜ (Context Switching)

## ğŸ“Œ í•µì‹¬ ì§ˆë¬¸
> **CPU ì‹¤í–‰ ì œì–´ê¶Œì„ OSê°€ ë˜ì°¾ê³ **, í”„ë¡œì„¸ìŠ¤ë¥¼ êµì²´í•˜ë ¤ë©´ ì–´ë–»ê²Œ í•´ì•¼ í• ê¹Œ?

---

## âœ… 9.1 ë¬¸ë§¥ êµí™˜ì´ë€?

- í•˜ë‚˜ì˜ í”„ë¡œì„¸ìŠ¤ë¥¼ ë©ˆì¶”ê³  ë‹¤ë¥¸ í”„ë¡œì„¸ìŠ¤ë¡œ ì „í™˜í•˜ëŠ” ì‘ì—…
- ì‹¤í–‰ ì¤‘ì´ë˜ í”„ë¡œì„¸ìŠ¤ì˜ **ë ˆì§€ìŠ¤í„°, ìŠ¤íƒ í¬ì¸í„°** ë“±ì„ ì €ì¥
- ì „í™˜ë  í”„ë¡œì„¸ìŠ¤ì˜ ìƒíƒœë¥¼ ë³µì›

---

## ğŸ§  ë‘ ë‹¨ê³„ ì €ì¥ êµ¬ì¡°

1. **í•˜ë“œì›¨ì–´ ì €ì¥**: ì¸í„°ëŸ½íŠ¸ ë°œìƒ ì‹œ, ì‚¬ìš©ì ë ˆì§€ìŠ¤í„°ëŠ” ì»¤ë„ ìŠ¤íƒì— ì €ì¥ë¨
2. **ì†Œí”„íŠ¸ì›¨ì–´ ì €ì¥**: ì»¤ë„ ì½”ë“œê°€ í˜„ì¬ ë¬¸ë§¥(context)ì„ PCBì— ì €ì¥í•˜ê³ , ë‹¤ìŒ í”„ë¡œì„¸ìŠ¤ì˜ ë¬¸ë§¥ì„ ë¶ˆëŸ¬ì˜´

---

## âœï¸ ì˜ˆì‹œ: xv6 ë¬¸ë§¥ êµí™˜ ì–´ì…ˆë¸”ë¦¬

```asm
# old í”„ë¡œì„¸ìŠ¤ ìƒíƒœ ì €ì¥
movl %esp, 4(%eax)
movl %ebx, 8(%eax)
...

# new í”„ë¡œì„¸ìŠ¤ ìƒíƒœ ë³µì›
movl 28(%eax), %ebp
movl 24(%eax), %edi
...
ret
```

---

## âœ… ìŠ¤íƒ ì „í™˜

- ì»¤ë„ ìŠ¤íƒì€ í”„ë¡œì„¸ìŠ¤ë§ˆë‹¤ ë‹¤ë¦„
- ìŠ¤ìœ„ì¹­ ì‹œ ìŠ¤íƒ í¬ì¸í„°ë„ í•¨ê»˜ ë³€ê²½
- `return-from-trap` ì‹œ ë³µê·€

---

## âš ï¸ ì£¼ì˜ì‚¬í•­

- ì»¨í…ìŠ¤íŠ¸ ìŠ¤ìœ„ì¹˜ì—ëŠ” ë¹„ìš©ì´ ë°œìƒí•¨ (ìºì‹œ ë¬´íš¨í™” ë“±)
- ë„ˆë¬´ ì¦ì€ ì „í™˜ì€ ì„±ëŠ¥ ì €í•˜ë¥¼ ìœ ë°œí•  ìˆ˜ ìˆìŒ

---

## âœ… ìš”ì•½

| í•­ëª© | ì„¤ëª… |
|------|------|
| ëª©ì  | í”„ë¡œì„¸ìŠ¤ ì „í™˜ ì‹œ ìƒíƒœ ì €ì¥/ë³µì› |
| ë°©ë²• | ë ˆì§€ìŠ¤í„°, PC, SP ì €ì¥ í›„ êµì²´ |
| ìœ„ì¹˜ | PCB ë° ì»¤ë„ ìŠ¤íƒ |
| ì„±ëŠ¥ | ì˜¤ë²„í—¤ë“œ ì¡´ì¬ (ê°€ê¸‰ì  ìµœì†Œí™”) |

---

> ğŸ“š ì¶œì²˜: ã€OSTEP Chapter 9 â€“ Context Switchingã€
